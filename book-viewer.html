<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Viewer - Smart Hub</title>
  <link rel="icon" href="img/icone.jpg" type="image/x-icon">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title>Google Books Embedded Viewer API Example</title>
  <script type="text/javascript" src="https://www.google.com/books/jsapi.js"></script>
  <script type="text/javascript">
    google.books.load();
    function initialize() {
      var viewer = new google.books.DefaultViewer(document.getElementById('viewerCanvas'));
      var index = document.URL.indexOf('?');
      if (index > 0) {
          var bookIsbn = document.URL.substring(index, document.URL.length).split("=")[1]
          console.log(bookIsbn);
      }
      //viewer.load('ISBN:0738531367'); //for test purpose
      viewer.load('ISBN:'+bookIsbn);
    }
    google.books.setOnLoadCallback(initialize);
  </script>  
</head>
<body>
    <div class="container">
        <div class="text-center" id="viewerCanvas" style="width: 800px; height: 600px"></div>
      </div>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">   
  
  <script>
    // Get the URL parameter
    var urlParams = new URLSearchParams(window.location.search);
    var bookUrl = urlParams.get('url');

    if (bookUrl) {
      // Redirect to the book URL
      window.location.href = bookUrl;
    } else {
      alert('No book URL provided!');
    }
  </script>
</body>
</html>
